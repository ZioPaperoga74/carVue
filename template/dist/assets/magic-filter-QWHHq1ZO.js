import{_ as v,r as d,c as n,o as a,a as p,b as t,J as l,aP as _,t as c,F as y,e as x,aQ as q,aR as w}from"./index-LMFVUyQs.js";const Q={data(){return{title:"Magic Filter",text:"Home",text1:"Magic Filter",started:!1,currentQuestion:0,budgetValue:null,answers:{},questions:[{question:"Viaggi molto durante l'anno?",type:"choice",options:[{label:"Sì",value:"yes"},{label:"No",value:"no"}]},{question:"Guiderai soprattutto in città, su autostrada, o in entrambi i contesti?",type:"choice",options:[{label:"Città",value:"city"},{label:"Autostrada",value:"highway"},{label:"Misto",value:"mixed"}]},{question:"Hai bisogno di un bagagliaio particolarmente capiente?",type:"choice",options:[{label:"Sì",value:"yes"},{label:"No",value:"no"}]},{question:"Preferisci cambio manuale o automatico?",type:"choice",options:[{label:"Manuale",value:"manual"},{label:"Automatico",value:"automatic"},{label:"Indifferente",value:"indifferent"}]},{question:"Qual è il budget massimo per l'acquisto?",type:"number"},{question:"Vuoi comprare da un privato o da un concessionario?",type:"choice",options:[{label:"Privato",value:"private"},{label:"Concessionario",value:"dealer"},{label:"Indifferente",value:"indifferent"}]}]}},methods:{startWizard(){this.started=!0},selectAnswer(s){const i=this.questions[this.currentQuestion];this.answers[i.question]=s,this.currentQuestion<this.questions.length-1?(this.currentQuestion++,this.budgetValue=null):this.processAnswersAndRedirect()},processAnswersAndRedirect(){const s={};Object.keys(this.answers).forEach(o=>{const e=this.answers[o];o==="Viaggi molto durante l'anno?"&&(e==="yes"?s.maxKm=5e4:s.maxKm=2e5),o==="Preferisci cambio manuale o automatico?"&&e!=="indifferent"&&(s.transmission=e==="manual"?"Manuale":"Automatico"),o==="Qual è il budget massimo per l'acquisto?"&&(s.maxPrice=e),o==="Vuoi comprare da un privato o da un concessionario?"&&(e==="private"?(!s.maxKm||s.maxKm>2e5)&&(s.maxKm=2e5):e==="dealer"?(!s.maxKm||s.maxKm>5e4)&&(s.maxKm=5e4):e==="indifferent"&&(!s.maxKm||s.maxKm>2e5)&&(s.maxKm=2e5))}),console.log("Magic Filter - Filtri applicati:",s);const i=new URLSearchParams;Object.keys(s).forEach(o=>{s[o]!==null&&s[o]!==void 0&&i.append(o,s[o])});const m=Object.fromEntries(i);console.log("Magic Filter - Query finale:",m),setTimeout(()=>{this.$router.push({path:"/listing/listing-grid",query:m})},2e3)}}},V={class:"listing-page"},k={class:"section magic-filter-section"},C={class:"container"},K={class:"row justify-content-center"},A={class:"col-lg-8"},F={key:0,class:"welcome-section text-center","data-aos":"fade-down"},M={key:1,class:"question-section","data-aos":"fade-up"},P={class:"progress-wrapper mb-4"},S={class:"progress"},z={class:"text-muted"},I={class:"question-card"},N={class:"question-title mb-4"},j={key:0,class:"answer-options"},B=["onClick"],E={class:"option-content"},R={class:"option-text"},D={key:1,class:"budget-input"},O={class:"input-group"},W=["disabled"],H={key:2,class:"processing-section text-center","data-aos":"fade-up"};function L(s,i,m,o,e,u){const b=d("layouts-header"),f=d("breadcrumb"),g=d("layout-footer");return a(),n("div",V,[p(b),p(f,{title:e.title,text:e.text,text1:e.text1},null,8,["title","text","text1"]),t("section",k,[t("div",C,[t("div",K,[t("div",A,[e.started?l("",!0):(a(),n("div",F,[i[3]||(i[3]=t("div",{class:"welcome-icon mb-4"},[t("i",{class:"fas fa-magic"})],-1)),i[4]||(i[4]=t("h1",{class:"welcome-title mb-4"}," Benvenuto al nostro Magic Filter ",-1)),i[5]||(i[5]=t("p",{class:"welcome-description mb-5"}," Invece di selezionare che macchina vuoi, noi ti proponiamo delle macchine in base a come rispondi alle nostre domande. Per esempio: viaggi molto durante l'anno? Se sì, allora nella query per selezionare quali auto mostrarti sceglieremo auto con pochi chilometri percorsi. ",-1)),t("button",{onClick:i[0]||(i[0]=(...r)=>u.startWizard&&u.startWizard(...r)),class:"btn btn-primary btn-lg"}," Comincia ora ")])),e.started&&e.currentQuestion<e.questions.length?(a(),n("div",M,[t("div",P,[t("div",S,[t("div",{class:"progress-bar",style:_({width:(e.currentQuestion+1)/e.questions.length*100+"%"})},null,4)]),t("small",z,"Domanda "+c(e.currentQuestion+1)+" di "+c(e.questions.length),1)]),t("div",I,[t("h3",N,c(e.questions[e.currentQuestion].question),1),e.questions[e.currentQuestion].type==="choice"?(a(),n("div",j,[(a(!0),n(y,null,x(e.questions[e.currentQuestion].options,(r,h)=>(a(),n("div",{key:h,class:"answer-option",onClick:T=>u.selectAnswer(r.value)},[t("div",E,[t("span",R,c(r.label),1)])],8,B))),128))])):l("",!0),e.questions[e.currentQuestion].type==="number"?(a(),n("div",D,[t("div",O,[i[6]||(i[6]=t("span",{class:"input-group-text"},"€",-1)),q(t("input",{type:"number",class:"form-control","onUpdate:modelValue":i[1]||(i[1]=r=>e.budgetValue=r),placeholder:"Inserisci il tuo budget massimo",min:"0"},null,512),[[w,e.budgetValue]])]),t("button",{onClick:i[2]||(i[2]=r=>u.selectAnswer(e.budgetValue)),class:"btn btn-primary mt-3",disabled:!e.budgetValue||e.budgetValue<=0}," Continua ",8,W)])):l("",!0)])])):l("",!0),e.started&&e.currentQuestion>=e.questions.length?(a(),n("div",H,i[7]||(i[7]=[t("div",{class:"spinner-border text-primary mb-3",role:"status"},[t("span",{class:"visually-hidden"},"Caricamento...")],-1),t("h4",null,"Stiamo preparando le auto perfette per te...",-1)]))):l("",!0)])])])]),p(g)])}const G=v(Q,[["render",L],["__scopeId","data-v-07864a62"]]);export{G as default};
